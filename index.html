<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate CNC Viewer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="viewer-container">
        <div id="top-toolbar">
            <button id="save-btn" class="tool-button" data-tooltip="Save STL">Save</button>
            <label class="tool-button" for="file-input" data-tooltip="Open G-code File">Open</label>
            <input type="file" id="file-input" accept=".nc,.gcode,.txt">
            <button id="sample-circle-btn" class="tool-button" data-tooltip="Load Circle Sample">Circle</button>
            <button id="sample-square-btn" class="tool-button" data-tooltip="Load Square Sample">Square</button>
        </div>
        <div id="sidebar">
            <h3>File Info</h3>
            <div id="info-panel">
                <div class="info-item"><span class="info-label">File Name:</span><span id="file-name">None</span></div>
                <div class="info-item"><span class="info-label">File Size:</span><span id="file-size">0 KB</span></div>
                <div class="info-item"><span class="info-label">Toolpaths:</span><span id="toolpath-count">0</span></div>
                <div class="info-item"><span class="info-label">Units:</span><span id="units">N/A</span></div>
                <div class="info-item"><span class="info-label">Bounds:</span><span id="bounds">N/A</span></div>
                <div class="info-item"><span class="info-label">Current Tool:</span><span id="current-tool">N/A</span></div>
            </div>
            <h3>G-code Editor</h3>
            <textarea id="gcode-input" placeholder="Enter G-code here or load a file..."></textarea>
            <div class="dropdown-buttons">
                <button id="plot-btn" class="nc-btn" data-tooltip="Plot G-code">Plot</button>
                <button id="clear-btn" class="nc-btn alt mx-1" data-tooltip="Clear Plot">Clear</button>
            </div>
        </div>
        <div id="canvas-container">
            <canvas id="canvas-2d"></canvas>
            <canvas id="canvas-3d"></canvas>
            <div id="control-bar">
                <div class="control-icons">
                    <span id="ctrl-2d3d" class="icon" data-tooltip="Toggle 2D/3D"><svg viewBox="0 0 24 24"><path d="M4 4h16v16H4z" fill="none" stroke="currentColor" stroke-width="2"/></svg></span>
                    <span id="ctrl-material" class="icon" data-tooltip="Toggle Material"><svg viewBox="0 0 24 24"><path d="M3 3h18v18H3z" fill="currentColor" opacity="0.5"/></svg></span>
                    <span id="ctrl-reset" class="icon" data-tooltip="Reset View"><svg viewBox="0 0 24 24"><path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z" fill="currentColor"/></svg></span>
                    <span id="ctrl-rewind" class="icon" data-tooltip="Fast Rewind"><svg viewBox="0 0 24 24"><path d="M11 18V6l-8 6 8 6zm2 0V6l8 6-8 6z" fill="currentColor"/></svg></span>
                    <span id="ctrl-play-reverse" class="icon" data-tooltip="Play Reverse"><svg id="play-btn-reverse" viewBox="0 0 24 24"><path d="M15 6v12l-8-6z" fill="currentColor"/></svg><svg id="pause-btn-reverse" viewBox="0 0 24 24" style="display:none"><path d="M6 19h4V5H6zm8-14v14h4V5z" fill="currentColor"/></svg></span>
                    <span id="ctrl-play" class="icon" data-tooltip="Play"><svg id="play-btn" viewBox="0 0 24 24"><path d="M8 6v12l8-6z" fill="currentColor"/></svg><svg id="pause-btn" viewBox="0 0 24 24" style="display:none"><path d="M6 19h4V5H6zm8-14v14h4V5z" fill="currentColor"/></svg></span>
                    <span id="ctrl-forward" class="icon" data-tooltip="Fast Forward"><svg viewBox="0 0 24 24"><path d="M4 18l8-6-8-6v12zm9-12v12l8-6z" fill="currentColor"/></svg></span>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/exporters/STLExporter.js"></script>
    <script src="cnc-viewer.js"></script>
    <script src="parsers.js"></script>
    <script src="main.js"></script>
</body>
</html>
